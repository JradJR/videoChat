(this.webpackJsonpclients=this.webpackJsonpclients||[]).push([[0],{132:function(e,t){},134:function(e,t){},151:function(e,t,a){},152:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(9),i=a.n(c),r=a(22),l=a(192),s=a(188),o=a(194),d=a(19),j=a(85),u=a(55),b=a.n(u),m=a(4),x=Object(n.createContext)(),O=Object(j.io)("http://localhost:5000"),p=function(e){var t=e.children,a=Object(n.useState)(null),c=Object(d.a)(a,2),i=c[0],r=c[1],l=Object(n.useState)(""),s=Object(d.a)(l,2),o=s[0],j=s[1],u=Object(n.useState)({}),p=Object(d.a)(u,2),f=p[0],h=p[1],g=Object(n.useState)(!1),v=Object(d.a)(g,2),C=v[0],w=v[1],y=Object(n.useState)(!1),N=Object(d.a)(y,2),k=N[0],I=N[1],S=Object(n.useState)(""),D=Object(d.a)(S,2),B=D[0],A=D[1],R=Object(n.useRef)(),V=Object(n.useRef)(),E=Object(n.useRef)();Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){r(e),R.current.srcObject=e})),O.on("me",(function(e){return j(e)})),O.on("calluser",(function(e){var t=e.from,a=e.name,n=e.signal;h({isReceivedCall:!0,from:t,name:a,signal:n})}))}),[]);return Object(m.jsx)(x.Provider,{value:{call:f,callAccepted:C,callEnded:k,myVideo:R,userVideo:V,stream:i,name:B,setName:A,me:o,callUser:function(e){var t=new b.a({initiator:!0,trickle:!1,stream:i});t.on("signal",(function(t){O.emit("calluser",{userToCall:e,signalData:t,from:o,name:B})})),t.on("stream",(function(e){V.current.srcObject=e})),O.on("callccepted",(function(e){w(!0),t.signal(e)})),E.current=t},leaveCall:function(){I(!0),E.current.destroy(),window.location.reload()},answerCall:function(){w(!0);var e=new b.a({initiator:!1,trickle:!1,stream:i});e.on("signal",(function(e){O.emit("answerCall",{signal:e,to:f.from})})),e.on("stream",(function(e){V.current.srcObject=e})),e.signal(f.signal),E.current=e}},children:t})},f=function(){var e=Object(n.useContext)(x),t=e.answerCall,a=e.call,c=e.callAccepted;return Object(m.jsx)(m.Fragment,{children:a.isReceivedCall&&!c&&Object(m.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(m.jsx)("h1",{children:"".concat(a.name," is calling: ")}),Object(m.jsx)(o.a,{color:"primary",variant:"contained",onClick:t,children:"Answer"})]})})},h=a(186),g=a(153),v=a(187),C=a(193),w=a(185),y=a(91),N=a(189),k=a(190),I=a(191),S=Object(w.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(r.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(r.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid black"}}})),D=function(e){var t=e.children,a=S(),c=Object(n.useContext)(x),i=c.me,r=c.callAccepted,l=c.name,j=c.setName,u=c.callEnded,b=c.leaveCall,O=c.callUser,p=Object(n.useState)(""),f=Object(d.a)(p,2),w=f[0],D=f[1];return console.log(w),Object(m.jsx)(h.a,{className:a.container,children:Object(m.jsxs)(g.a,{elevation:10,className:a.paper,children:[Object(m.jsx)("from",{className:a.root,noValidate:!0,autoComplete:"off",children:Object(m.jsxs)(v.a,{container:!0,className:a.gridContainer,children:[Object(m.jsxs)(v.a,{item:!0,xs:12,md:6,className:a.padding,children:[Object(m.jsx)(s.a,{gutterBottom:!0,variant:"h6",children:"Account Info"}),Object(m.jsx)(C.a,{value:l,label:"Name",onChange:function(e){return j(e.target.value)}}),Object(m.jsx)(y.CopyToClipboard,{text:i,className:a.margin,children:Object(m.jsx)(o.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(m.jsx)(N.a,{fontSize:"large"}),children:"Copy Your ID"})})]}),Object(m.jsxs)(v.a,{item:!0,xs:12,md:6,className:a.padding,children:[Object(m.jsx)(s.a,{gutterBottom:!0,variant:"h6",children:"Make a call"}),Object(m.jsx)(C.a,{value:w,label:"Id to call",onChange:function(e){return D(e.target.value)}}),r&&!u?Object(m.jsx)(o.a,{variant:"contained",color:"secondary",fullWidth:!0,onClick:b,className:a.margin,startIcon:Object(m.jsx)(k.a,{fontSize:"large"}),children:"Hang Up"}):Object(m.jsx)(o.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){return O(w)},className:a.margin,startIcon:Object(m.jsx)(I.a,{fontSize:"large"}),children:"Call"})]})]})}),t]})})},B=Object(w.a)((function(e){return{video:Object(r.a)({width:"550px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(r.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"10px",border:"2px solid black",margin:"10px"}}})),A=function(){var e=Object(n.useContext)(x),t=e.name,a=e.callAccepted,c=e.callEnded,i=e.myVideo,r=e.userVideo,l=e.stream,o=e.call,d=B();return Object(m.jsxs)(v.a,{container:!0,className:d.gridContainer,children:[l&&Object(m.jsx)(g.a,{className:d.paper,children:Object(m.jsxs)(v.a,{item:!0,xs:12,md:6,children:[Object(m.jsx)(s.a,{variant:"h5",gutterBottom:!0,children:t||"Name"}),Object(m.jsx)("video",{playsInline:!0,muted:!0,ref:i,autoPlay:!0,className:d.video})]})}),a&&!c&&Object(m.jsx)(g.a,{className:d.paper,children:Object(m.jsxs)(v.a,{item:!0,xs:12,md:6,children:[Object(m.jsx)(s.a,{variant:"h5",gutterBottom:!0,children:o.name}),Object(m.jsx)("video",{playsInline:!0,ref:r,autoPlay:!0,className:d.video})]})})]})},R=Object(w.a)((function(e){return{appBar:Object(r.a)({borderRadius:15,margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"600px",border:"2px solid black"},e.breakpoints.down("xs"),{width:"90%"}),image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),V=function(){var e=R();return Object(m.jsxs)("div",{className:e.wrapper,children:[Object(m.jsx)(l.a,{className:e.appBar,position:"static",color:"inherit",children:Object(m.jsx)(s.a,{variant:"h2",align:"center",children:"Vidoe Chat"})}),Object(m.jsx)(A,{}),Object(m.jsx)(D,{children:Object(m.jsx)(f,{})})]})};a(151);i.a.render(Object(m.jsx)(p,{children:Object(m.jsx)(V,{})}),document.getElementById("root"))}},[[152,1,2]]]);
//# sourceMappingURL=main.2e51a0be.chunk.js.map